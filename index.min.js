!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).useStorage={},e.react)}(this,(function(e,t){"use strict";const o=Symbol("Storage.Create"),n=Symbol("Storage.Update"),r=Symbol("Storage.Remove"),a=Symbol("Storage.Clear");function i(e){return{getItem(t){try{return JSON.parse(e.getItem(t))}catch(e){return null}},setItem(t,o){e.setItem(t,JSON.stringify(o))},removeItem(t){e.removeItem(t)},clear(){e.clear()}}}function s(){const e=[];return[(t,o)=>{const n=(e,n)=>{e===a&&o(),e===t&&o(n)};return e.push(n),()=>e.splice(e.indexOf(n),1)},(t,o)=>{e.forEach((e=>e(t,o)))}]}function c(e,[o,n]=s()){const r=i(e);return function(e){const[a,i]=t.useState((()=>r.getItem(e))),s=t.useCallback((t=>{r.setItem(e,t),n(e,t)}),[e]);return t.useEffect((()=>(i(r.getItem(e)),o(e,i))),[e]),[a,s]}}const u=c(i(window.localStorage));e.CLEAR=a,e.CREATE=o,e.REMOVE=r,e.UPDATE=n,e.addWindowListener=function(e){const t=({key:t,oldValue:o,newValue:n})=>void 0===t?e.clear():void 0===!n?e.remove(t):void 0===!o?e.create(t,n):e.update(t,n);return window.addEventListener("storage",t),()=>window.removeEventListener(t)},e.default=u,e.getJsonStorage=i,e.getListener=s,e.hookFactory=c,Object.defineProperty(e,"__esModule",{value:!0})}));
