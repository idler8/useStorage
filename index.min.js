!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).useStorage={},e.react)}(this,(function(e,t){"use strict";function n(e){const n={},o=[];return function(r){const[u,i]=t.useState((()=>e.get(r))),a=t.useCallback((t=>e.update(r,t)),[r]);return t.useEffect((()=>{i(e.get(r));const t=e=>e===r&&i(n[r]);return o.push(t),()=>o.splice(o.indexOf(t),1)}),[r]),[u,a]}}function o(e){return{get(t){try{return JSON.parse(e.getItem(t))}catch(e){return null}},update(t,n){e.setItem(t,JSON.stringify(n))},remove(t){e.removeItem(t)},clear(){e.clear()},create(e,t){this.update(e,t)}}}const r=n(o(localStorage));e.addWindowListener=function(e){const t=({key:t,oldValue:n,newValue:o})=>void 0===t?e.clear():void 0===!o?e.remove(t):void 0===!n?e.create(t,o):e.update(t,o);return window.addEventListener("storage",t),()=>window.removeEventListener(t)},e.default=r,e.getWindowStorage=o,e.hookFactory=n,Object.defineProperty(e,"__esModule",{value:!0})}));
