!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).useStorage={},e.react)}(this,(function(e,t){"use strict";function n(e,n){const o={},r=[];function u(e,t,u){n(e,t),o[e]=t,u||r.forEach((t=>t(e)))}function c(t){return o[t]||e(t)}function f(e){const[n,f]=t.useState((()=>c(e))),i=t.useCallback((t=>u(e,t)),[e]);return t.useEffect((()=>{f(c(e));const t=t=>t===e&&f(o[e]);return r.push(t),()=>r.splice(r.indexOf(t),1)}),[e]),[n,i]}return f.setStorage=u,f.getStorage=c,f}var o=n((function(e,t){localStorage[e]=JSON.stringify(t)}),(function(e){try{return JSON.parse(localStorage[e])}catch(e){return null}}));e.default=o,e.factory=n,Object.defineProperty(e,"__esModule",{value:!0})}));
