import{useState as t,useCallback as r,useEffect as n}from"react";const o={},c=[];function e(t,r,n){localStorage[t]=JSON.stringify(r),o[t]=r,n||c.forEach((r=>r(t)))}function a(t){try{return o[t]||JSON.parse(localStorage[t])}catch(t){return null}}function u(u){const[f,i]=t(o[u]||(()=>o[u]=a(u))),l=r((t=>{e(u,t)}),[u]);return n((()=>{i(o[u]);const t=t=>t===u&&i(o[u]);return c.push(t),()=>c.splice(c.indexOf(t),1)}),[u]),[f,l]}export{u as default,a as getStorage,e as setStorage};
